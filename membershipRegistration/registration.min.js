;(function(laodeyu){document.writeln("		<div id=\"registrationBg\"></div>");document.writeln("		<div class=\"box\" id=\"registrationShow\">");document.writeln("			<div id=\"\" class=\"top_font\">");document.writeln("				<strong>会员注册</strong>");document.writeln("			</div>");document.writeln("			<div id=\"registrationClose\" style=\"position: absolute;right: 10px;top: 7px;\">");document.writeln("				<img src=\"img/@2x/关闭@2x.png\" class=\"image_size_close\"/>");document.writeln("			</div>");document.writeln("			<div class=\"div_all\">");document.writeln("				<!--填写顺序-->");document.writeln("				<div class=\"div_cont\">");document.writeln("					<img src=\"img/@2x/验证完成@2x.png\" class=\"image_size\" id=\"step_succ\" />");document.writeln("					<img src=\"img/@2x/步骤1-拷贝@2x.png\" class=\"image_size\" id=\"step_comp\" />");document.writeln("					<img src=\"img/@2x/步骤1@2x.png\" class=\"image_size\" id=\"step1_ing\" />");document.writeln("				</div>");document.writeln("				<div class=\"div_cont\" id=\"step_phone\">手机验证</div>");document.writeln("				<div class=\"div_cont\">一一</div>");document.writeln("				<div class=\"div_cont\">");document.writeln("					<img src=\"img/@2x/验证完成@2x.png\" class=\"image_size\" id=\"step2_succ\" />");document.writeln("					<img src=\"img/@2x/步骤2-拷贝@2x.png\" class=\"image_size\" id=\"step2_ing\" />");document.writeln("					<img src=\"img/@2x/步骤2@2x.png\" class=\"image_size\" id=\"step2_comp\" />");document.writeln("				</div>");document.writeln("				<div class=\"div_cont\" id=\"step_data\">资料填写</div>");document.writeln("				<div class=\"div_cont\">一一</div>");document.writeln("				<div class=\"div_cont\">");document.writeln("					<img src=\"img/@2x/验证完成@2x.png\" class=\"image_size\" id=\"step3_succ\" />");document.writeln("					<img src=\"img/@2x/步骤3-拷贝@2x.png\" class=\"image_size\" id=\"step3_comp\" />");document.writeln("					<img src=\"img/@2x/步骤3@2x.png\" class=\"image_size\" id=\"step3_ing\" />");document.writeln("				</div>");document.writeln("				<div class=\"div_cont\" id=\"step_succ_font\">完成注册</div>");document.writeln("				<div class=\"\" style=\"float: none;\">&nbsp</div>");document.writeln("			</div>");document.writeln("			<div id=\"Mobile_verification_area\">");document.writeln("				<!--手机验证区-->");document.writeln("				<div class=\"input_div_border_add\">");document.writeln("				</div>");document.writeln("				<div class=\"input_div_border\" style=\"padding-bottom: 10px;\">");document.writeln("");document.writeln("					<div class=\"lable\">");document.writeln("						手机号");document.writeln("					</div>");document.writeln("					<div class=\"input_space\" style=\"float: left;width:100px;\">");document.writeln("						<input type=\"\" name=\"\" id=\"phone_number\" value=\"\" placeholder=\"请输入您的手机号\" class=\"data_input\" style=\"margin-left: -25px;\" />");document.writeln("");document.writeln("					</div>");document.writeln("					<div class=\"\" style=\"\">");document.writeln("						|<button id=\"get_code\" style=\"outline: none;background-color: transparent;border: none;\">获取验证码</button>");document.writeln("					</div>");document.writeln("				</div>");document.writeln("				<div class=\"input_div_border\" style=\"padding-bottom: 5px;\">");document.writeln("					<div class=\"lable\">");document.writeln("						验证码");document.writeln("					</div>");document.writeln("					<div class=\"input_space\">");document.writeln("						<input type=\"\" name=\"\" id=\"success_code\" value=\"\" placeholder=\"请输入您的验证码\" class=\"data_input\" />");document.writeln("					</div>");document.writeln("				</div>");document.writeln("				<div class=\"input_div_border_add2\">");document.writeln("				</div>");document.writeln("			</div>");document.writeln("			<!------------------------->");document.writeln("			<div id=\"Data_fill_area\">");document.writeln("				<!--资料填写区域-->");document.writeln("				<div class=\"input_div_border\">");document.writeln("					<div class=\"lable\">");document.writeln("						<span style=\"color: red;\">*</span>姓名");document.writeln("					</div>");document.writeln("					<div class=\"input_space\">");document.writeln("						<input type=\"text\" name=\"\" id=\"name\" value=\"\" placeholder=\"请输入您的姓名\" class=\"data_input\" />");document.writeln("					</div>");document.writeln("				</div>");document.writeln("				<div class=\"input_div_border\">");document.writeln("					<div class=\"lable\">");document.writeln("						<span style=\"color: red;\">*</span>性别");document.writeln("					</div>");document.writeln("					<div class=\"\" style=\"margin-bottom: 6px;\">");document.writeln("						<div id=\"sexMan\">");document.writeln("						<img src=\"img/@2x/单选选中@2x.png\" class=\"searchbox_img\" id=\"searchVal\"/>");document.writeln("						<img src=\"img/@2x/单选项默认@2x.png\" class=\"searchbox_img\" id=\"searchFalse\"/>						");document.writeln("						<div class=\"sex_nan\" >");document.writeln("							男");document.writeln("						</div>");document.writeln("						</div>");document.writeln("						<div id=\"sexNv\">");document.writeln("                        <img src=\"img/@2x/单选选中@2x.png\" class=\"searchbox_img\" id=\"searchTrue\"/>");document.writeln("						<img src=\"img/@2x/单选项默认@2x.png\" class=\"searchbox_img\"id=\"searchVal1\" />");document.writeln("						<div id=\"sex_nv\" >");document.writeln("							女");document.writeln("						</div>");document.writeln("						</div>");document.writeln("						<input type=\"text\" name=\"\" id=\"searchSexval\" value=\"\" hidden=\"hidden\" />");document.writeln("					</div>");document.writeln("				</div>");document.writeln("				<div class=\"input_div_border\">");document.writeln("					<div class=\"lable\">");document.writeln("						<span style=\"color: red;\">*</span>生日");document.writeln("					</div>");document.writeln("					<div class=\"input_space\">");document.writeln("						<input type=\"text\" name=\"\" id=\"birthday\" value=\"\" placeholder=\"输入生日号如:19970710\" class=\"data_input\" />");document.writeln("					</div>");document.writeln("				</div>");document.writeln("			</div>");document.writeln("			<!------------------------->");document.writeln("			<div id=\"reg_success\">");document.writeln("				<img src=\"img/@2x/注册成功@3x.png\" class=\"image_size_success\" />");document.writeln("				<div id=\"\" class=\"success_info\">");document.writeln("					注册成功");document.writeln("				</div>");document.writeln("			</div>");document.writeln("			<div class=\"btn_div\" id=\"btn_next\">");document.writeln("				<button class=\"btn_1\">下一步</button>");document.writeln("			</div>");document.writeln("			<div class=\"btn_div\" id=\"btn_next_success\">");document.writeln("				<button class=\"btn_1_success\">下一步</button>");document.writeln("			</div>");document.writeln("			<div class=\"btn_div\" id=\"success\">");document.writeln("				<button class=\"btn_1_success\">完成</button>");document.writeln("			</div>");document.writeln("		</div>");sessionStorage.setItem('VerificationCode_value',"0");sessionStorage.setItem('page_ing',"1");document.getElementById('step_phone').style.color='black';var default_option={bgGround:"none",fontvalue:""};var api={config:function(opts){if(!opts){return default_option}for(var key in opts){default_option[key]=opts[key]}return this},change_display:function(e,change){var id=document.querySelector(e);var change=document.querySelector(change);id.style.display=default_option.bgGround;if(change){change.style.display=default_option.fontvalue}},MobileArea:function(phone,pwd,name,brithday){var valuePhone=document.getElementById(phone).value;var value_code=document.getElementById(pwd).value;var NameInput=document.getElementById(name).value;var Sexinput=document.getElementById("searchSexval").value;var BirthdayInput=document.getElementById(brithday).value;var getpage=sessionStorage.getItem('page_ing');if(getpage=="1"){if(valuePhone==""||value_code==""){alert("手机号码/验证码，不能为空！")}else{var VerificationCode_session=sessionStorage.getItem('VerificationCode_value');var VerificationCode_data=VerificationCode_session.substring(7,13);if(VerificationCode_data==value_code){api.change_display("#Mobile_verification_area","#Data_fill_area");api.change_display("#btn_next_success","#btn_next");document.getElementById('step_data').style.color='black';sessionStorage.setItem('page_ing',"2")}else if(VerificationCode_data=="0"){alert("验证码过期/或页面被刷新");}else{alert("失败!请检查验证码和短信~")}}}else if(getpage=="2"){if(NameInput==""||BirthdayInput==""){alert("错误！信息不完整")}else{api.change_display("#btn_next_success","#success");api.change_display("#Data_fill_area","#reg_success");api.change_display("#step2_comp","#step2_succ");api.change_display("#step3_ing","#step3_succ");api.change_display("#step_comp","#step_succ");document.getElementById('step_succ_font').style.color='black';var atr=[];atr=[{name:"phone",value:valuePhone},{name:"name",value:NameInput},{name:"Sex",value:Sexinput},{name:"brithday",value:BirthdayInput}];var jsonData=JSON.stringify(atr);var data='len='+atr.length+'&Tab_name=Membership&atr='+jsonData;var XHR=null;if(window.XMLHttpRequest){XHR=new XMLHttpRequest()}else if(window.ActiveXObject){XHR=new ActiveXObject("Microsoft.XMLHTTP")}else{XHR=null}if(XHR){var xhr=new XMLHttpRequest();XHR.open("POST","./php/Form_save.php",true);XHR.onreadystatechange=function(){if(XHR.readyState==4&&XHR.status==200){console.log(XHR.responseText);XHR=null}};XHR.setRequestHeader("Content-type","application/x-www-form-urlencoded");XHR.send(data)}}}},GetCodePost:function(get_code,phone,params,target){var get_codete=document.getElementById(get_code);get_codete.onclick=function(){var phone_val=document.getElementById(phone).value;document.getElementById(get_code).disabled="true";var time=60;var timer=setInterval(fun1,1000);function fun1(){time-=1;if(time>=0){get_codete.innerHTML=time+"s后重新发送"}else{get_codete.innerHTML="重新发送验证码";get_codete.disabled=false;clearTimeout(timer);time=60;}}var irand=Math.random()*(999999-100000)+100000;var irandSt=Math.random()*(9999999-1000000)+1000000;var irandSti=String(parseInt(irandSt,10));var irandEd=Math.random()*(9999999-1000000)+1000000;var irandEdi=String(parseInt(irandEd,10));var jcoun=String(parseInt(irand,10));var irandSum=irandSti+jcoun+irandEdi;sessionStorage.setItem('VerificationCode_value',irandSum);var data={random_text:jcoun,phone:phone_val};var data='random_text='+data.random_text+'&phone='+data.phone;var XHR=null;if(window.XMLHttpRequest){XHR=new XMLHttpRequest()}else if(window.ActiveXObject){XHR=new ActiveXObject("Microsoft.XMLHTTP")}else{XHR=null}if(XHR){XHR.open("POST","https://www.captain-mjm.com/wechat_php/Send_text_messages.php",true);XHR.onreadystatechange=function(){if(XHR.readyState==4&&XHR.status==200){console.log(XHR.responseText);XHR=null}};XHR.setRequestHeader("Content-type","application/x-www-form-urlencoded");XHR.send(data)}setTimeout(function(){sessionStorage.setItem('VerificationCode_value',"0")},60000);}},SuccessCode:function(phone,pwd){var inp1=document.getElementById(phone);inp1.onblur=function(){var values=document.getElementById(phone).value;if(!(/^1(3|4|5|7|8)\d{9}$/.test(values))){alert("手机号码有误，请重填");document.getElementById(phone).value="";return false}else{localStorage.setItem("phone_number",values);api.change_display("#btn_next","#btn_next_success");api.change_display("#step1_ing","#step_comp");}}},SuccessName:function(name,birthday){var Cname=document.getElementById(name);var Birthday=document.getElementById(birthday);Cname.onblur=function(){api.change_display("#btn_next","#btn_next_success");api.change_display("#step2_ing","#step2_comp");};Birthday.onblur=function(){if(screen.width>500){var str=document.getElementById(birthday).value;var reg=/(.{4})(.*)/;str=str.replace(reg,"$1-$2");var regp=/(.{7})(.*)/;str=str.replace(regp,"$1-$2");document.getElementById(birthday).value=str;if(str.length!=10){alert("数据有误，请重新填写");document.getElementById(birthday).value=""}}}},selectSex:function(searchSexval,sexMan,sexNv){document.getElementById(searchSexval).value="man";var man=document.getElementById(sexMan);var nv=document.getElementById(sexNv);man.onclick=function(){api.change_display("#searchFalse","#searchVal");api.change_display("#searchTrue","#searchVal1");};nv.onclick=function(){document.getElementById(searchSexval).value="women";api.change_display("#searchVal","#searchFalse");api.change_display("#searchVal1","#searchTrue");}},registrationShow:function(id){var _id=document.getElementById(id);_id.onclick=function(){if(id!="registrationClose"){document.getElementById("registrationBg").style.display="block";document.getElementById("registrationShow").style.display="block"}else{document.getElementById("registrationBg").style.display="none";document.getElementById("registrationShow").style.display="none"}}},registrationSuccess:function(id,type,href){var button_success=document.getElementById(id);button_success.onclick=function(){if(type=="close"){document.getElementById("registrationBg").style.display="none";document.getElementById("registrationShow").style.display="none"}if(type=="href"){window.location.href=href}}}};this.registration=api;registration.change_display("#reg_success");registration.change_display("#Data_fill_area");registration.change_display("#success");registration.change_display("#btn_next_success");registration.change_display("#step_succ");registration.change_display("#step_comp");registration.change_display("#step2_succ");registration.change_display("#step2_comp");registration.change_display("#step3_succ");registration.change_display("#step3_comp");registration.change_display("#searchFalse");registration.change_display("#searchTrue");var button_next=document.getElementById("btn_next_success");button_next.onclick=function(){registration.MobileArea("phone_number","success_code","name","birthday")};registration.GetCodePost("get_code","phone_number");registration.SuccessCode("phone_number","success_code");registration.SuccessName("name","birthday");registration.selectSex("searchSexval","sexMan","sexNv");registration.registrationShow("registrationClose");})();window.lCalendar=(function(){var MobileCalendar=function(){this.gearDate;this.minY=1900;this.minM=1,this.minD=1,this.maxY=2099,this.maxM=12,this.maxD=31};MobileCalendar.prototype={init:function(params){this.type=params.type;this.trigger=document.querySelector(params.trigger);if(this.trigger.getAttribute("data-lcalendar")!=null){var arr=this.trigger.getAttribute("data-lcalendar").split(',');var minArr=arr[0].split('-');this.minY= ~~minArr[0];this.minM= ~~minArr[1];this.minD= ~~minArr[2];var maxArr=arr[1].split('-');this.maxY= ~~maxArr[0];this.maxM= ~~maxArr[1];this.maxD= ~~maxArr[2]}this.bindEvent(this.type)},bindEvent:function(type){var _self=this;function popupDate(e){_self.gearDate=document.createElement("div");_self.gearDate.className="gearDate";_self.gearDate.innerHTML='<div class="date_ctrl slideInUp"><div class="date_btn_box"><div class="date_btn lcalendar_cancel">取消</div><div class="date_btn lcalendar_finish">确定</div></div><div class="date_roll_mask"><div class="date_roll"><div><div class="gear date_yy" data-datetype="date_yy"></div><div class="date_grid"><div>年</div></div></div><div><div class="gear date_mm" data-datetype="date_mm"></div><div class="date_grid"><div>月</div></div></div><div><div class="gear date_dd" data-datetype="date_dd"></div><div class="date_grid"><div>日</div></div></div></div></div></div>';document.body.appendChild(_self.gearDate);dateCtrlInit();var lcalendar_cancel=_self.gearDate.querySelector(".lcalendar_cancel");lcalendar_cancel.addEventListener('touchstart',closeMobileCalendar);var lcalendar_finish=_self.gearDate.querySelector(".lcalendar_finish");lcalendar_finish.addEventListener('touchstart',finishMobileDate);var date_yy=_self.gearDate.querySelector(".date_yy");var date_mm=_self.gearDate.querySelector(".date_mm");var date_dd=_self.gearDate.querySelector(".date_dd");date_yy.addEventListener('touchstart',gearTouchStart);date_mm.addEventListener('touchstart',gearTouchStart);date_dd.addEventListener('touchstart',gearTouchStart);date_yy.addEventListener('touchmove',gearTouchMove);date_mm.addEventListener('touchmove',gearTouchMove);date_dd.addEventListener('touchmove',gearTouchMove);date_yy.addEventListener('touchend',gearTouchEnd);date_mm.addEventListener('touchend',gearTouchEnd);date_dd.addEventListener('touchend',gearTouchEnd)}function dateCtrlInit(){var date=new Date();var dateArr={yy:date.getYear(),mm:date.getMonth(),dd:date.getDate()-1};if(/^\d{4}-\d{1,2}-\d{1,2}$/.test(_self.trigger.value)){rs=_self.trigger.value.match(/(^|-)\d{1,4}/g);dateArr.yy=rs[0]-_self.minY;dateArr.mm=rs[1].replace(/-/g,"")-1;dateArr.dd=rs[2].replace(/-/g,"")-1}else{dateArr.yy=dateArr.yy+1900-_self.minY}_self.gearDate.querySelector(".date_yy").setAttribute("val",dateArr.yy);_self.gearDate.querySelector(".date_mm").setAttribute("val",dateArr.mm);_self.gearDate.querySelector(".date_dd").setAttribute("val",dateArr.dd);setDateGearTooth()}function popupDateTime(e){_self.gearDate=document.createElement("div");_self.gearDate.className="gearDatetime";_self.gearDate.innerHTML='<div class="date_ctrl slideInUp"><div class="date_btn_box"><div class="date_btn lcalendar_cancel">取消</div><div class="date_btn lcalendar_finish">确定</div></div><div class="date_roll_mask"><div class="datetime_roll"><div><div class="gear date_yy" data-datetype="date_yy"></div><div class="date_grid"><div>年</div></div></div><div><div class="gear date_mm" data-datetype="date_mm"></div><div class="date_grid"><div>月</div></div></div><div><div class="gear date_dd" data-datetype="date_dd"></div><div class="date_grid"><div>日</div></div></div><div><div class="gear time_hh" data-datetype="time_hh"></div><div class="date_grid"><div>时</div></div></div><div><div class="gear time_mm" data-datetype="time_mm"></div><div class="date_grid"><div>分</div></div></div></div>'+'</div>'+'</div>';document.body.appendChild(_self.gearDate);dateTimeCtrlInit();var lcalendar_cancel=_self.gearDate.querySelector(".lcalendar_cancel");lcalendar_cancel.addEventListener('touchstart',closeMobileCalendar);var lcalendar_finish=_self.gearDate.querySelector(".lcalendar_finish");lcalendar_finish.addEventListener('touchstart',finishMobileDateTime);var date_yy=_self.gearDate.querySelector(".date_yy");var date_mm=_self.gearDate.querySelector(".date_mm");var date_dd=_self.gearDate.querySelector(".date_dd");var time_hh=_self.gearDate.querySelector(".time_hh");var time_mm=_self.gearDate.querySelector(".time_mm");date_yy.addEventListener('touchstart',gearTouchStart);date_mm.addEventListener('touchstart',gearTouchStart);date_dd.addEventListener('touchstart',gearTouchStart);time_hh.addEventListener('touchstart',gearTouchStart);time_mm.addEventListener('touchstart',gearTouchStart);date_yy.addEventListener('touchmove',gearTouchMove);date_mm.addEventListener('touchmove',gearTouchMove);date_dd.addEventListener('touchmove',gearTouchMove);time_hh.addEventListener('touchmove',gearTouchMove);time_mm.addEventListener('touchmove',gearTouchMove);date_yy.addEventListener('touchend',gearTouchEnd);date_mm.addEventListener('touchend',gearTouchEnd);date_dd.addEventListener('touchend',gearTouchEnd);time_hh.addEventListener('touchend',gearTouchEnd);time_mm.addEventListener('touchend',gearTouchEnd)}function dateTimeCtrlInit(){var date=new Date();var dateArr={yy:date.getYear(),mm:date.getMonth(),dd:date.getDate()-1,hh:date.getHours(),mi:date.getMinutes()};if(/^\d{4}-\d{1,2}-\d{1,2}\s\d{2}:\d{2}$/.test(_self.trigger.value)){rs=_self.trigger.value.match(/(^|-|\s|:)\d{1,4}/g);dateArr.yy=rs[0]-_self.minY;dateArr.mm=rs[1].replace(/-/g,"")-1;dateArr.dd=rs[2].replace(/-/g,"")-1;dateArr.hh=parseInt(rs[3].replace(/\s0?/g,""));dateArr.mi=parseInt(rs[4].replace(/:0?/g,""))}else{dateArr.yy=dateArr.yy+1900-_self.minY}_self.gearDate.querySelector(".date_yy").setAttribute("val",dateArr.yy);_self.gearDate.querySelector(".date_mm").setAttribute("val",dateArr.mm);_self.gearDate.querySelector(".date_dd").setAttribute("val",dateArr.dd);setDateGearTooth();_self.gearDate.querySelector(".time_hh").setAttribute("val",dateArr.hh);_self.gearDate.querySelector(".time_mm").setAttribute("val",dateArr.mi);setTimeGearTooth()}function popupTime(e){_self.gearDate=document.createElement("div");_self.gearDate.className="gearDate";_self.gearDate.innerHTML='<div class="date_ctrl slideInUp"><div class="date_btn_box"><div class="date_btn lcalendar_cancel">取消</div><div class="date_btn lcalendar_finish">确定</div></div><div class="date_roll_mask"><div class="time_roll"><div><div class="gear time_hh" data-datetype="time_hh"></div><div class="date_grid"><div>时</div></div></div><div><div class="gear time_mm" data-datetype="time_mm"></div><div class="date_grid"><div>分</div></div></div><div><div class="gear time_ss" data-datetype="time_ss"></div><div class="date_grid"><div>秒</div></div></div></div></div></div>';document.body.appendChild(_self.gearDate);timeCtrlInit();var lcalendar_cancel=_self.gearDate.querySelector(".lcalendar_cancel");lcalendar_cancel.addEventListener('touchstart',closeMobileCalendar);var lcalendar_finish=_self.gearDate.querySelector(".lcalendar_finish");lcalendar_finish.addEventListener('touchstart',finishMobileTime);var time_hh=_self.gearDate.querySelector(".time_hh");var time_mm=_self.gearDate.querySelector(".time_mm");var time_ss=_self.gearDate.querySelector(".time_ss");time_hh.addEventListener('touchstart',gearTouchStart);time_mm.addEventListener('touchstart',gearTouchStart);time_ss.addEventListener('touchstart',gearTouchStart);time_hh.addEventListener('touchmove',gearTouchMove);time_mm.addEventListener('touchmove',gearTouchMove);time_ss.addEventListener('touchmove',gearTouchMove);time_hh.addEventListener('touchend',gearTouchEnd);time_mm.addEventListener('touchend',gearTouchEnd);time_ss.addEventListener('touchend',gearTouchEnd)}function timeCtrlInit(){var d=new Date();var e={hh:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds()};if(/^\d{2}:\d{2}:\d{2}$/.test(_self.trigger.value)){rs=_self.trigger.value.match(/(^|:)\d{2}/g);e.hh=parseInt(rs[0].replace(/^0?/g,""));e.mm=parseInt(rs[1].replace(/:0?/g,""));e.ss=parseInt(rs[2].replace(/:0?/g,""))}_self.gearDate.querySelector(".time_hh").setAttribute("val",e.hh);_self.gearDate.querySelector(".time_mm").setAttribute("val",e.mm);_self.gearDate.querySelector(".time_ss").setAttribute("val",e.ss);setTimeGearTooth()}function setDateGearTooth(){var passY=_self.maxY-_self.minY+1;var date_yy=_self.gearDate.querySelector(".date_yy");var itemStr="";if(date_yy&&date_yy.getAttribute("val")){var yyVal=parseInt(date_yy.getAttribute("val"));for(var p=0;p<=passY-1;p+=1){itemStr+="<div class='tooth'>"+(_self.minY+p)+"</div>"}date_yy.innerHTML=itemStr;var top=Math.floor(parseFloat(date_yy.getAttribute('top')));if(!isNaN(top)){top%2==0?(top=top):(top=top+1);top>8&&(top=8);var minTop=8-(passY-1)*2;top<minTop&&(top=minTop);date_yy.style["-webkit-transform"]='translate3d(0,'+top+'em,0)';date_yy.setAttribute('top',top+'em');yyVal=Math.abs(top-8)/2;date_yy.setAttribute("val",yyVal)}else{date_yy.style["-webkit-transform"]='translate3d(0,'+(8-yyVal*2)+'em,0)';date_yy.setAttribute('top',8-yyVal*2+'em')}}else{return}var date_mm=_self.gearDate.querySelector(".date_mm");if(date_mm&&date_mm.getAttribute("val")){itemStr="";var mmVal=parseInt(date_mm.getAttribute("val"));var maxM=11;var minM=0;if(yyVal==passY-1){maxM=_self.maxM-1}if(yyVal==0){minM=_self.minM-1}for(var p=0;p<maxM-minM+1;p+=1){itemStr+="<div class='tooth'>"+(minM+p+1)+"</div>"}date_mm.innerHTML=itemStr;if(mmVal>maxM){mmVal=maxM;date_mm.setAttribute("val",mmVal)}else if(mmVal<minM){mmVal=maxM;date_mm.setAttribute("val",mmVal)}date_mm.style["-webkit-transform"]='translate3d(0,'+(8-(mmVal-minM)*2)+'em,0)';date_mm.setAttribute('top',8-(mmVal-minM)*2+'em')}else{return}var date_dd=_self.gearDate.querySelector(".date_dd");if(date_dd&&date_dd.getAttribute("val")){itemStr="";var ddVal=parseInt(date_dd.getAttribute("val"));var maxMonthDays=calcDays(yyVal,mmVal);var maxD=maxMonthDays-1;var minD=0;if(yyVal==passY-1&&_self.maxM==mmVal+1){maxD=_self.maxD-1}if(yyVal==0&&_self.minM==mmVal+1){minD=_self.minD-1}for(var p=0;p<maxD-minD+1;p+=1){itemStr+="<div class='tooth'>"+(minD+p+1)+"</div>"}date_dd.innerHTML=itemStr;if(ddVal>maxD){ddVal=maxD;date_dd.setAttribute("val",ddVal)}else if(ddVal<minD){ddVal=minD;date_dd.setAttribute("val",ddVal)}date_dd.style["-webkit-transform"]='translate3d(0,'+(8-(ddVal-minD)*2)+'em,0)';date_dd.setAttribute('top',8-(ddVal-minD)*2+'em')}else{return}}function setTimeGearTooth(){var time_hh=_self.gearDate.querySelector(".time_hh");if(time_hh&&time_hh.getAttribute("val")){var i="";var hhVal=parseInt(time_hh.getAttribute("val"));for(var g=0;g<=23;g+=1){i+="<div class='tooth'>"+g+"</div>"}time_hh.innerHTML=i;time_hh.style["-webkit-transform"]='translate3d(0,'+(8-hhVal*2)+'em,0)';time_hh.setAttribute('top',8-hhVal*2+'em')}else{return}var time_mm=_self.gearDate.querySelector(".time_mm");if(time_mm&&time_mm.getAttribute("val")){var i="";var mmVal=parseInt(time_mm.getAttribute("val"));for(var g=0;g<=59;g+=1){i+="<div class='tooth'>"+g+"</div>"}time_mm.innerHTML=i;time_mm.style["-webkit-transform"]='translate3d(0,'+(8-mmVal*2)+'em,0)';time_mm.setAttribute('top',8-mmVal*2+'em')}else{return}var time_ss=_self.gearDate.querySelector(".time_ss");if(time_ss&&time_ss.getAttribute("val")){var i="";var mmVal=parseInt(time_ss.getAttribute("val"));for(var g=0;g<=59;g+=1){i+="<div class='tooth'>"+g+"</div>"}time_ss.innerHTML=i;time_ss.style["-webkit-transform"]='translate3d(0,'+(8-mmVal*2)+'em,0)';time_ss.setAttribute('top',8-mmVal*2+'em')}else{return}}function calcDays(year,month){if(month==1){year+=_self.minY;if((year%4==0&&year%100!=0)||(year%400==0&&year%4000!=0)){return 29}else{return 28}}else{if(month==3||month==5||month==8||month==10){return 30}else{return 31}}}function gearTouchStart(e){e.preventDefault();var target=e.target;while(true){if(!target.classList.contains("gear")){target=target.parentElement}else{break}}clearInterval(target["int_"+target.id]);target["old_"+target.id]=e.targetTouches[0].screenY;target["o_t_"+target.id]=(new Date()).getTime();var top=target.getAttribute('top');if(top){target["o_d_"+target.id]=parseFloat(top.replace(/em/g,""))}else{target["o_d_"+target.id]=0}}function gearTouchMove(e){e.preventDefault();var target=e.target;while(true){if(!target.classList.contains("gear")){target=target.parentElement}else{break}}target["new_"+target.id]=e.targetTouches[0].screenY;target["n_t_"+target.id]=(new Date()).getTime();var f=(target["new_"+target.id]-target["old_"+target.id])*18/370;target["pos_"+target.id]=target["o_d_"+target.id]+f;target.style["-webkit-transform"]='translate3d(0,'+target["pos_"+target.id]+'em,0)';target.setAttribute('top',target["pos_"+target.id]+'em')}function gearTouchEnd(e){e.preventDefault();var target=e.target;while(true){if(!target.classList.contains("gear")){target=target.parentElement}else{break}}var flag=(target["new_"+target.id]-target["old_"+target.id])/(target["n_t_"+target.id]-target["o_t_"+target.id]);if(Math.abs(flag)<=0.2){target["spd_"+target.id]=(flag<0?-0.08:0.08)}else{if(Math.abs(flag)<=0.5){target["spd_"+target.id]=(flag<0?-0.16:0.16)}else{target["spd_"+target.id]=flag/2}}if(!target["pos_"+target.id]){target["pos_"+target.id]=0}rollGear(target)}function rollGear(target){var d=0;var stopGear=false;var passY=_self.maxY-_self.minY+1;clearInterval(target["int_"+target.id]);target["int_"+target.id]=setInterval(function(){var pos=target["pos_"+target.id];var speed=target["spd_"+target.id]*Math.exp(-0.03*d);pos+=speed;if(Math.abs(speed)>0.1){}else{speed=0.1;var b=Math.round(pos/2)*2;if(Math.abs(pos-b)<0.02){stopGear=true}else{if(pos>b){pos-=speed}else{pos+=speed}}}if(pos>8){pos=8;stopGear=true}switch(target.dataset.datetype){case "date_yy":var minTop=8-(passY-1)*2;if(pos<minTop){pos=minTop;stopGear=true}if(stopGear){var gearVal=Math.abs(pos-8)/2;setGear(target,gearVal);clearInterval(target["int_"+target.id])}break;case "date_mm":var date_yy=_self.gearDate.querySelector(".date_yy");var yyVal=parseInt(date_yy.getAttribute("val"));var maxM=11;var minM=0;if(yyVal==passY-1){maxM=_self.maxM-1}if(yyVal==0){minM=_self.minM-1}var minTop=8-(maxM-minM)*2;if(pos<minTop){pos=minTop;stopGear=true}if(stopGear){var gearVal=Math.abs(pos-8)/2+minM;setGear(target,gearVal);clearInterval(target["int_"+target.id])}break;case "date_dd":var date_yy=_self.gearDate.querySelector(".date_yy");var date_mm=_self.gearDate.querySelector(".date_mm");var yyVal=parseInt(date_yy.getAttribute("val"));var mmVal=parseInt(date_mm.getAttribute("val"));var maxMonthDays=calcDays(yyVal,mmVal);var maxD=maxMonthDays-1;var minD=0;if(yyVal==passY-1&&_self.maxM==mmVal+1){maxD=_self.maxD-1}if(yyVal==0&&_self.minM==mmVal+1){minD=_self.minD-1}var minTop=8-(maxD-minD)*2;if(pos<minTop){pos=minTop;stopGear=true}if(stopGear){var gearVal=Math.abs(pos-8)/2+minD;setGear(target,gearVal);clearInterval(target["int_"+target.id])}break;case "time_hh":if(pos<-38){pos=-38;stopGear=true}if(stopGear){var gearVal=Math.abs(pos-8)/2;setGear(target,gearVal);clearInterval(target["int_"+target.id])}break;case "time_mm":if(pos<-110){pos=-110;stopGear=true}if(stopGear){var gearVal=Math.abs(pos-8)/2;setGear(target,gearVal);clearInterval(target["int_"+target.id])}break;case "time_ss":if(pos<-110){pos=-110;stopGear=true}if(stopGear){var gearVal=Math.abs(pos-8)/2;setGear(target,gearVal);clearInterval(target["int_"+target.id])}break;default:}target["pos_"+target.id]=pos;target.style["-webkit-transform"]='translate3d(0,'+pos+'em,0)';target.setAttribute('top',pos+'em');d+=1},30)}function setGear(target,val){val=Math.round(val);target.setAttribute("val",val);if(/date/.test(target.dataset.datetype)){setDateGearTooth()}else{setTimeGearTooth()}}function closeMobileCalendar(e){e.preventDefault();var evt=new CustomEvent('input');_self.trigger.dispatchEvent(evt);document.body.removeChild(_self.gearDate)}function finishMobileDate(e){var passY=_self.maxY-_self.minY+1;var date_yy=parseInt(Math.round(_self.gearDate.querySelector(".date_yy").getAttribute("val")));var date_mm=parseInt(Math.round(_self.gearDate.querySelector(".date_mm").getAttribute("val")))+1;date_mm=date_mm>9?date_mm:'0'+date_mm;var date_dd=parseInt(Math.round(_self.gearDate.querySelector(".date_dd").getAttribute("val")))+1;date_dd=date_dd>9?date_dd:'0'+date_dd;_self.trigger.value=(date_yy%passY+_self.minY)+"-"+date_mm+"-"+date_dd;closeMobileCalendar(e)}function finishMobileDateTime(e){var passY=_self.maxY-_self.minY+1;var date_yy=parseInt(Math.round(_self.gearDate.querySelector(".date_yy").getAttribute("val")));var date_mm=parseInt(Math.round(_self.gearDate.querySelector(".date_mm").getAttribute("val")))+1;date_mm=date_mm>9?date_mm:'0'+date_mm;var date_dd=parseInt(Math.round(_self.gearDate.querySelector(".date_dd").getAttribute("val")))+1;date_dd=date_dd>9?date_dd:'0'+date_dd;var time_hh=parseInt(Math.round(_self.gearDate.querySelector(".time_hh").getAttribute("val")));time_hh=time_hh>9?time_hh:'0'+time_hh;var time_mm=parseInt(Math.round(_self.gearDate.querySelector(".time_mm").getAttribute("val")));time_mm=time_mm>9?time_mm:'0'+time_mm;_self.trigger.value=(date_yy%passY+_self.minY)+"-"+date_mm+"-"+date_dd+" "+(time_hh.length<2?"0":"")+time_hh+(time_mm.length<2?":0":":")+time_mm;closeMobileCalendar(e)}function finishMobileTime(e){var time_hh=parseInt(Math.round(_self.gearDate.querySelector(".time_hh").getAttribute("val")));time_hh=time_hh>9?time_hh:'0'+time_hh;var time_mm=parseInt(Math.round(_self.gearDate.querySelector(".time_mm").getAttribute("val")));time_mm=time_mm>9?time_mm:'0'+time_mm;var time_ss=parseInt(Math.round(_self.gearDate.querySelector(".time_ss").getAttribute("val")));time_ss=time_ss>9?time_ss:'0'+time_ss;_self.trigger.value=(time_hh.length<2?"0":"")+time_hh+(time_mm.length<2?":0":":")+time_mm+(time_ss.length<2?":0":":")+time_ss;closeMobileCalendar(e)}_self.trigger.addEventListener('click',{"date":popupDate,"datetime":popupDateTime,"time":popupTime}[type])}};return MobileCalendar})();if(screen.width<=500){var calendar=new lCalendar();calendar.init({'trigger':'#birthday','type':'date'})}